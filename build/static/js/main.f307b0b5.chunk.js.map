{"version":3,"sources":["Filter.jsx","services/persons.js","Persons/Person.jsx","Persons/Persons.jsx","PersonForm.jsx","Message/Message.jsx","App.jsx","index.js"],"names":["Filter","handler","htmlFor","id","onChange","e","target","value","baseUrl","process","getPersons","axios","get","then","response","data","addPerson","person","post","deletePerson","delete","updateNumber","put","Person","deleteHandler","notifier","name","number","onClick","window","confirm","personsService","catch","Persons","persons","filter","updater","i","toLowerCase","includes","map","key","PersonForm","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","preventDefault","Message","message","text","messageClasses","type","className","App","setPersons","search","setSearch","setMessage","showMessage","isError","setTimeout","useEffect","fetchedPersons","indexToUpdate","findIndex","concat","error","updated","copied","slice","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f307b0b5.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function Filter({ handler }) {\n  function fireChange(e) {\n    handler(e.target.value);\n  }\n\n  return (\n    <>\n      <label htmlFor=\"search\">filter shown with </label>\n      <input id=\"search\" onChange={fireChange} />\n    </>\n  );\n}\n","import axios from 'axios';\n\nconst baseUrl = process.env.REACT_APP_API_URL || 'http://127.0.0.1:3001/persons';\n\nfunction getPersons() {\n  return axios.get(baseUrl).then((response) => response.data);\n}\n\nfunction addPerson(person) {\n  return axios.post(baseUrl, person).then((response) => response.data);\n}\n\nfunction deletePerson({ id }) {\n  return axios.delete(`${baseUrl}/${id}`);\n}\n\nfunction updateNumber(id, person) {\n  return axios.put(`${baseUrl}/${id}`, person);\n}\n\nexport default { getPersons, addPerson, deletePerson, updateNumber };\n","import React from 'react';\n\nimport personsService from '../services/persons';\n\nexport default function Person({ person, deleteHandler, notifier }) {\n  const { name, number } = person;\n\n  function deletePerson(person) {\n    let isConfirmed = window.confirm(`${person.name} is about to be deleted. Please confirm.`);\n\n    if (isConfirmed) {\n      personsService\n        .deletePerson(person)\n        .then(() => {\n          deleteHandler(person);\n        })\n        .catch(() => notifier(`Something went wrong. ${person.name} was not deleted.`, true));\n    }\n  }\n\n  return (\n    <div>\n      <span>\n        {name} {number}\n      </span>\n      <button onClick={() => deletePerson(person)}>delete</button>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport Person from './Person';\n\nexport default function Persons({ persons, filter, updater, notifier }) {\n  function deletePerson(person) {\n    updater(persons.filter((i) => i.id !== person.id));\n    notifier(`${person.name} was deleted.`);\n  }\n\n  return (\n    <>\n      <h2>numbers</h2>\n      {persons\n        .filter(({ name }) => name.toLowerCase().includes(filter))\n        .map((person) => (\n          <Person key={person.id} person={person} deleteHandler={deletePerson} notifier={notifier} />\n        ))}\n    </>\n  );\n}\n","import React, { useState } from 'react';\n\nexport default function PersonForm({ addPerson }) {\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n\n  function submitPerson(e) {\n    e.preventDefault();\n    addPerson({ name: newName, number: newNumber });\n    setNewName('');\n    setNewNumber('');\n  }\n\n  return (\n    <>\n      <h2>add a new</h2>\n      <form onSubmit={submitPerson}>\n        <div>\n          <label htmlFor=\"name\">name:</label>\n          <input id=\"name\" value={newName} onChange={(e) => setNewName(e.target.value)} />\n        </div>\n        <div>\n          <label htmlFor=\"number\">number:</label>\n          <input id=\"number\" value={newNumber} onChange={(e) => setNewNumber(e.target.value)} />\n        </div>\n        <button>add</button>\n      </form>\n    </>\n  );\n}\n","import React from 'react';\n\nimport './Message.css';\n\nexport default function Message({ message }) {\n  if (message === null) {\n    return null;\n  }\n\n  const { text, type } = message;\n  const messageClasses = 'message ' + type;\n\n  return <div className={messageClasses}>{text}</div>;\n}\n","import React, { useState, useEffect } from 'react';\n\nimport Filter from './Filter';\nimport Persons from './Persons';\nimport PersonForm from './PersonForm';\nimport Message from './Message';\nimport personsService from './services/persons';\n\nimport './App.css';\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [search, setSearch] = useState('');\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    personsService\n      .getPersons()\n      .then((fetchedPersons) => setPersons(fetchedPersons))\n      .catch(() => showMessage('Could not fetch persons', true));\n  }, []);\n\n  function addPerson(person) {\n    const indexToUpdate = persons.findIndex(({ name }) => person.name === name);\n\n    if (indexToUpdate < 0) {\n      return personsService\n        .addPerson(person)\n        .then((person) => {\n          setPersons(persons.concat(person));\n          showMessage(`${person.name} has been successfully added to phonebook`);\n        })\n        .catch((error) => {\n          const message = error.response.data.error || `Something went wrong. ${person.name} was not added.`;\n          showMessage(message, true);\n        });\n    }\n\n    const isUpdate = window.confirm(\n      `${person.name} is already added to phonebook, replace the old number with a new one?`\n    );\n\n    if (isUpdate) {\n      const updated = persons[indexToUpdate];\n      personsService\n        .updateNumber(updated.id, person)\n        .then(() => showMessage(`Number of ${person.name} has been changed to ${person.number}`))\n        .then(() => {\n          const copied = persons.slice();\n          copied[indexToUpdate] = { ...updated, number: person.number };\n          setPersons(copied);\n        })\n        .catch(() => showMessage(`Something went wrong. ${person.name} was not updated.`, true));\n    }\n  }\n\n  function showMessage(text, isError) {\n    const message = {\n      text,\n      type: isError ? 'error' : 'notify'\n    };\n\n    setMessage(message);\n    setTimeout(() => setMessage(null), 5000);\n  }\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Filter handler={setSearch} />\n      <PersonForm addPerson={addPerson} />\n      <Persons persons={persons} filter={search} updater={setPersons} notifier={showMessage} />\n      <Message message={message} />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}