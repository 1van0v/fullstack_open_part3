(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(40)},20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(20),t(4)),l=t(2);function i(e){var n=e.handler;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"search"},"filter shown with "),r.a.createElement("input",{id:"search",onChange:function(e){n(e.target.value)}}))}var m=t(3),d=t.n(m),s="/api/persons";var f={getPersons:function(){return d.a.get(s).then((function(e){return e.data}))},addPerson:function(e){return d.a.post(s,e).then((function(e){return e.data}))},deletePerson:function(e){var n=e.id;return d.a.delete("".concat(s,"/").concat(n))},updateNumber:function(e,n){return d.a.put("".concat(s,"/").concat(e),n)}};function b(e){var n=e.person,t=e.deleteHandler,a=e.notifier,o=n.name,c=n.number;return r.a.createElement("div",null,r.a.createElement("span",null,o," ",c),r.a.createElement("button",{onClick:function(){return function(e){window.confirm("".concat(e.name," is about to be deleted. Please confirm."))&&f.deletePerson(e).then((function(){t(e)})).catch((function(){return a("Something went wrong. ".concat(e.name," was not deleted."),!0)}))}(n)}},"delete"))}function h(e){var n=e.persons,t=e.filter,a=e.updater,o=e.notifier;function c(e){a(n.filter((function(n){return n.id!==e.id}))),o("".concat(e.name," was deleted."))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"numbers"),n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return r.a.createElement(b,{key:e.id,person:e,deleteHandler:c,notifier:o})})))}function p(e){var n=e.addPerson,t=Object(a.useState)(""),o=Object(l.a)(t,2),c=o[0],u=o[1],i=Object(a.useState)(""),m=Object(l.a)(i,2),d=m[0],s=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"add a new"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n({name:c,number:d}),u(""),s("")}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"name:"),r.a.createElement("input",{id:"name",value:c,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"number"},"number:"),r.a.createElement("input",{id:"number",value:d,onChange:function(e){return s(e.target.value)}})),r.a.createElement("button",null,"add")))}t(38);function E(e){var n=e.message;if(null===n)return null;var t=n.text,a="message "+n.type;return r.a.createElement("div",{className:a},t)}t(39);var v=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),m=Object(l.a)(c,2),d=m[0],s=m[1],b=Object(a.useState)(null),v=Object(l.a)(b,2),g=v[0],w=v[1];function j(e,n){w({text:e,type:n?"error":"notify"}),setTimeout((function(){return w(null)}),5e3)}return Object(a.useEffect)((function(){f.getPersons().then((function(e){return o(e)})).catch((function(){return j("Could not fetch persons",!0)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(i,{handler:s}),r.a.createElement(p,{addPerson:function(e){var n=t.findIndex((function(n){var t=n.name;return e.name===t}));if(n<0)return f.addPerson(e).then((function(e){o(t.concat(e)),j("".concat(e.name," has been successfully added to phonebook"))})).catch((function(n){j(n.response.data.error||"Something went wrong. ".concat(e.name," was not added."),!0)}));if(window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))){var a=t[n];f.updateNumber(a.id,e).then((function(){return j("Number of ".concat(e.name," has been changed to ").concat(e.number))})).then((function(){var r=t.slice();r[n]=Object(u.a)(Object(u.a)({},a),{},{number:e.number}),o(r)})).catch((function(){return j("Something went wrong. ".concat(e.name," was not updated."),!0)}))}}}),r.a.createElement(h,{persons:t,filter:d,updater:o,notifier:j}),r.a.createElement(E,{message:g}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f307b0b5.chunk.js.map